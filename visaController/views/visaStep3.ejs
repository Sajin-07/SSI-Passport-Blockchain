<!DOCTYPE html>
<html lang="en" data-theme="retro">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<!-- Tailwind CSS and daisyUI -->
		<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
		<link href="https://cdn.jsdelivr.net/npm/daisyui@2.0.0/dist/full.css" rel="stylesheet">
		<title>Document</title>
	</head>
	<body>

		<nav class="bg-base-200 shadow">
			<div class="container mx-auto px-4 py-4 flex items-center justify-between">
				<a class="text-xl font-bold" href="#">Department of Visa</a>
				<div class="flex items-center gap-4">
					<label class="flex cursor-pointer gap-2 items-center">
						<!-- Sun Icon -->
						<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
							<circle cx="12" cy="12" r="5" />
							<path d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4" />
						</svg>
						<!-- Toggle Switch -->
						<input type="checkbox" class="toggle theme-controller" />
						<!-- Moon Icon -->
						<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
							<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
						</svg>
					</label>
				</div>
				<button class="lg:hidden text-gray-500">
					<span class="iconify" data-icon="heroicons-outline:menu-alt-4"></span>
				</button>
				<div class="hidden lg:flex space-x-4">
					<a href="/" class="bg-green-500 text-white py-2 px-4 rounded font-bold hover:bg-green-600">Home</a>
					<!-- Additional Links can be added here -->
				</div>
			</div>
		</nav>

        <div class="container mx-auto px-4 py-10">
            <h2 class="text-xl font-bold border-b pb-2 mb-10">STEP-03: Submit Documents</h2>
            <!-- <p class="mb-4">Once you successfully Connected to Passport Portal, you can issue a VC.</p> -->
			<p class="block text-sm font-medium" style="color: red;">Submit all the documents in PDF format*</p>

			<p>
				• <strong>Photograph:</strong> A recent passport-sized color photograph with a white background. 
				   <br>
			</p>
			<p>
				• <strong>Proof of Address:</strong> Documents such as a utility bill, lease agreement, or driver's license that match the address provided in the application.
			</p>
			<p>
				• <strong>Proof of Legal Status (for non-citizens applying from a country other than their own):</strong> Valid visa or residence permit of the country from where you are applying.
			</p>
			<p>
				• <strong>Additional Documents (depending on visa type):</strong>
				   <ul>
					   <li><strong>&nbsp;&nbsp;&nbsp;&nbsp;Tourist Visa:</strong> Itinerary, proof of accommodation, and possibly a return ticket.</li>
					   <li><strong>&nbsp;&nbsp;&nbsp;&nbsp;Business Visa:</strong> Invitation letter from the Indian company, proof of business activities, and financial statements.</li>
					   <li><strong>&nbsp;&nbsp;&nbsp;&nbsp;Employment Visa:</strong> Employment contract, company registration documents, and proof of educational qualifications.</li>
					   <li><strong>&nbsp;&nbsp;&nbsp;&nbsp;Student Visa:</strong> Admission letter from the Indian educational institution and proof of financial support.</li>
					   <li><strong>&nbsp;&nbsp;&nbsp;&nbsp;Medical Visa:</strong> Letter from the hospital in India detailing the medical treatment, along with medical records.</li>
				   </ul>
			</p>

            <!-- <form action="/upload" method="POST" class="space-y-4"> -->
				
				<!-- Visa Type Selection -->
				<!-- <label for="visaType" class="block text-sm font-medium">Select Visa Type:</label>
				<select name="visaType" id="visaType" required class="select select-bordered w-full">
					<option value="" disabled selected>Select your visa type</option>
					<option value="Tourist Visa">Tourist Visa</option>
					<option value="Business Visa">Business Visa</option>
					<option value="Student Visa">Student Visa</option>
					<option value="Medical Visa">Medical Visa</option>
					<option value="Employment Visa">Employment Visa</option>
					
				</select>	 -->

                <!-- <label for="documents" class="block text-sm font-medium">Submit Documents (PDF only, multiple allowed):</label>
                <input type="file" name="documents" id="documents" accept=".pdf" multiple required class="file-input file-input-bordered w-full">
                
                <input type="submit" value="Submit" class="btn btn-primary w-full">
            </form> -->
			<form action="/upload" method="POST" class="space-y-4" enctype="multipart/form-data">
				<!-- Visa Type Selection -->
				<label for="visaType" class="block text-sm font-medium">Select Visa Type:</label>
				<select name="visaType" id="visaType" required class="select select-bordered w-full">
					<option value="" disabled selected>Select your visa type</option>
					<option value="Tourist Visa">Tourist Visa</option>
					<option value="Business Visa">Business Visa</option>
					<option value="Student Visa">Student Visa</option>
					<option value="Medical Visa">Medical Visa</option>
					<option value="Employment Visa">Employment Visa</option>
				</select>
			
				<!-- File Input -->
				<label for="documents" class="block text-sm font-medium">Submit Documents (PDF only, multiple allowed):</label>
				<input type="file" name="documents" id="documents" accept=".pdf" multiple required class="file-input file-input-bordered w-full">
			
				<!-- Submit Button -->
				<input type="submit" value="Submit" class="btn btn-primary w-full">
			</form>
            <!-- <a href="/fewdays2" class="btn btn-primary w-full mt-4">Next</a> -->
        </div>

        <% if (typeof message !== 'undefined') { %>
			<script>
				alert("<%= message %>");
			</script>
		<% } %>

		<script>
			// JavaScript for Theme Toggle
			document.addEventListener('DOMContentLoaded', function () {
				const themeController = document.querySelector('.theme-controller');
				
				// Check stored theme or default to light (bumblebee)
				const currentTheme = localStorage.getItem('theme') || 'retro';
				document.documentElement.setAttribute('data-theme', currentTheme);
				themeController.checked = currentTheme === 'synthwave';

				// Toggle event listener
				themeController.addEventListener('change', function () {
					const theme = themeController.checked ? 'synthwave' : 'retro';
					document.documentElement.setAttribute('data-theme', theme);
					localStorage.setItem('theme', theme);
				});
			});

			//add script for visa type
			//
			// const form = document.querySelector('form');
			// form.addEventListener('submit', async (e) => {
			// 	e.preventDefault(); // Prevent default form submission

			// 	const formData = new FormData(form);
			// 	try {
			// 		const response = await fetch('/upload', {
			// 			method: 'POST',
			// 			body: formData,
			// 		});

			// 		const result = await response.json();

			// 		if (response.status === 200) {
			// 			alert(result.message); // Show success alert
			// 		} else {
			// 			alert(result.error || 'File upload failed');
			// 		}
			// 	} catch (error) {
			// 		console.error(error);
			// 		alert('An error occurred while uploading files.');
			// 	}
			// });

		
			const form = document.querySelector('form');
			form.addEventListener('submit', async (e) => {
				e.preventDefault(); // Prevent default form submission

				const formData = new FormData(form);
				try {
					const response = await fetch('/upload', {
						method: 'POST',
						body: formData,
					});

					const result = await response.json();

					if (response.status === 200) {
						// Show success alert and redirect upon confirmation
						alert(result.message); // Show the success alert
						window.location.href = '/fewdays2'; // Redirect to fewdays.ejs
					} else {
						alert(result.error || 'File upload failed');
					}
				} catch (error) {
					console.error(error);
					alert('An error occurred while uploading files.');
				}
			});

			
		</script>

	</body>
</html>