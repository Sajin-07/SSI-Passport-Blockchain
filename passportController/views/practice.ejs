<!DOCTYPE html>
<html lang="en" data-theme="bumblebee">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<!-- Tailwind CSS and daisyUI -->
		<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
		<link href="https://cdn.jsdelivr.net/npm/daisyui@2.0.0/dist/full.css" rel="stylesheet">
		<title>Document</title>
	</head>
	<body>

		<nav class="bg-base-200 shadow">
			<div class="container mx-auto px-4 py-4 flex items-center justify-between">
				<a class="text-xl font-bold" href="#">Department of Passports</a>
				<div class="flex items-center gap-4">
					<label class="flex cursor-pointer gap-2 items-center">
						<!-- Sun Icon -->
						<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
							<circle cx="12" cy="12" r="5" />
							<path d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4" />
						</svg>
						<!-- Toggle Switch -->
						<input type="checkbox" class="toggle theme-controller" />
						<!-- Moon Icon -->
						<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
							<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
						</svg>
					</label>
				</div>
				<button class="lg:hidden text-gray-500">
					<span class="iconify" data-icon="heroicons-outline:menu-alt-4"></span>
				</button>
				<div class="hidden lg:flex space-x-4">
					<a href="/" class="bg-green-500 text-white py-2 px-4 rounded font-bold hover:bg-green-600">Home</a>
					<!-- Additional Links can be added here -->
				</div>
			</div>
		</nav>

		<div class="container mx-auto px-4 py-10">
			<h2 class="text-3xl font-bold border-b pb-2 mb-10">Welcome to e-Passport Portal</h2>

			<div class="grid gap-10 sm:grid-cols-2">
				<!-- STEP 01 -->
				<div class="bg-base-100 shadow rounded-lg p-6">
					<h2 class="text-xl font-bold mb-4">STEP-01: Connection to Passport Portal</h2>
					<a href="/newConnection" class="btn btn-primary w-full">Create new connection</a>
				</div>

				<!-- STEP 02 -->
				<div class="bg-base-100 shadow rounded-lg p-6">
					<h2 class="text-xl font-bold mb-4">STEP-02: Credential Issue</h2>
					<p class="mb-4">Once you successfully Connected to Passport Portal, you can issue a VC.</p>
					<form action="/offerCredential" method="POST" class="space-y-4">
						<label class="block text-sm font-medium">Please fill up the data to generate the VC:</label>
						<input type="text" name="name" id="name" placeholder="Name" class="input input-bordered w-full">
						<input type="text" name="email" id="email" placeholder="Email" class="input input-bordered w-full">
						<input type="text" name="address" id="address" placeholder="Address" class="input input-bordered w-full">
						<input type="text" name="dob" id="dob" placeholder="Date of Birth (DD/MM/YYYY)" class="input input-bordered w-full">
						<input type="text" name="nationality" id="nationality" placeholder="Nationality" required class="input input-bordered w-full">
						<input type="text" name="nid" id="nid" placeholder="National ID (NID)" required class="input input-bordered w-full">
						
						<label for="gender" class="block text-sm font-medium">Gender:</label>
						<select name="gender" id="gender" required class="select select-bordered w-full">
							<option value="" disabled selected>Select Gender</option>
							<option value="male">Male</option>
							<option value="female">Female</option>
							<option value="other">Other</option>
						</select>

						<label for="documents" class="block text-sm font-medium">Submit Documents (PDF only, multiple allowed):</label>
						<input type="file" name="documents" id="documents" accept=".pdf" multiple required class="file-input file-input-bordered w-full">
						
						<input type="submit" value="Submit" class="btn btn-primary w-full">
					</form>
				</div>
			</div>

			<div class="grid gap-10 sm:grid-cols-2 mt-10">
				<!-- STEP 03 -->
				<div class="bg-base-100 shadow rounded-lg p-6">
					<h2 class="text-xl font-bold mb-4">STEP-03: Now Accept VC from Mobile</h2>
					<p>Once you successfully receive the VC on your mobile, open it and click "Accept" button.</p>
				</div>

				<!-- STEP 04 -->
				<div class="bg-base-100 shadow rounded-lg p-6">
					<h2 class="text-xl font-bold mb-4">STEP-04: Send Proof Request</h2>
					<p>After storing the VC, you can prove your role as "Passport holder" of Country X.</p>
					<a href="/proofReq" class="btn btn-primary w-full">Request Proof</a>
				</div>
			</div>

			<div class="mt-10">
				<!-- STEP 05 -->
				<div class="bg-base-100 shadow rounded-lg p-6">
					<h2 class="text-xl font-bold mb-4">STEP-05: Now Check your Role</h2>
					<a href="/checkRole" class="btn btn-primary w-full">Check</a>
				</div>
			</div>
		</div>
		<% if (typeof message !== 'undefined') { %>
			<script>
				alert("<%= message %>");
			</script>
		<% } %>

		<script>
			// JavaScript for Theme Toggle
			document.addEventListener('DOMContentLoaded', function () {
				const themeController = document.querySelector('.theme-controller');
				
				// Check stored theme or default to light (bumblebee)
				const currentTheme = localStorage.getItem('theme') || 'bumblebee';
				document.documentElement.setAttribute('data-theme', currentTheme);
				themeController.checked = currentTheme === 'synthwave';

				// Toggle event listener
				themeController.addEventListener('change', function () {
					const theme = themeController.checked ? 'synthwave' : 'bumblebee';
					document.documentElement.setAttribute('data-theme', theme);
					localStorage.setItem('theme', theme);
				});
			});

			$(document).ready(function () {
				$(document).on('click', '#submit', function(e) { 
					e.preventDefault();

					var formData = new FormData();
					formData.append('name', $('#name').val());
					formData.append('email', $('#email').val());
					formData.append('address', $('#address').val());
					formData.append('dob', $('#dob').val());
					formData.append('nationality', $('#nationality').val());
					formData.append('nid', $('#nid').val());
					formData.append('gender', $('#gender').val());

					var documents = $('#documents')[0].files;
					for (var i = 0; i < documents.length; i++) {
						formData.append('documents', documents[i]);
					}

					$.ajax({
						url: '/offerCredential',
						type: 'POST',
						data: formData,
						processData: false,
						contentType: false,
						success: function(response) {
							alert('VC Sent and Files Uploaded');
						},
						error: function(error) {
							console.error(error);
						}
					});
				});
			});
		</script>

	</body>
</html>
